# Copyright (c) 2017, 2019 University of York and others
# This program and the accompanying materials are made available
# under the terms of the Eclipse Public License 2.0 which is
# available at http://www.eclipse.org/legal/epl-2.0.
#
# SPDX-License-Identifier: EPL-2.0
box: 
  id: openjdk:11.0.3-jdk-stretch
  username: $DOCKERUSR
  password: $DOCKERPWD

build:
  steps:
    - wercker/maven:
      goals: clean install
      cache_repo: true
      version: 3.6.0

deploy:
  steps:
    - install-packages:
        packages: rsync
    - add-ssh-key:
        keyname: deployment
    - add-to-known_hosts:
        hostname: $ROBOSTAR_WEB_HOST
        fingerprint: $ROBOSTAR_WEB_SSH_FINGERPRINT
        type: $ROBOSTAR_WEB_SSH_FINGERPRINT_TYPE
    - script:
        name: uploading update site
        code: |-
          ./upload.sh
